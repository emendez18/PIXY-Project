#include <SPI.h>
#include <Pixy.h>
#include <Wire.h>
#include <Adafruit_MotorShield.h>


Adafruit_MotorShield AFMS = Adafruit_MotorShield();
Adafruit_DCMotor *myMotor = AFMS.getMotor(1);
Adafruit_DCMotor *jeffMotor = AFMS.getMotor(2);

Pixy pixy;

void setup() {
 Serial.begin(9600);
 Serial.print("Starting...\n"); 
 AFMS.begin();
 pixy.init();

}

void loop() {
 uint16_t numBlocks;
 uint16_t sigsDetected;
 uint8_t i;
//red = sig 1
//yellow = sig 2
//green = sig 3
//blue = sig 4
 sigsDetected = pixy.getBlocks();

//detects a signature to go forward
 if (pixy.blocks[sigsDetected].signature == 3)  { //&& pixy.blocks[sigsDetected].x == 150) 
  myMotor->setSpeed(100);
  myMotor->run(FORWARD);
  jeffMotor->setSpeed(100);
  jeffMotor->run(FORWARD);
  Serial.println("Moving Forward");
  delay(50);
 }
 //detects a signature to turn left
 else if (pixy.blocks[sigsDetected].signature == 2) { //&& pixy.blocks[sigsDetected].x == 150) 
  // need to establish an x distance so it doesn't turn right when it detects the color
    myMotor->setSpeed(100);
    myMotor->run(FORWARD);
    jeffMotor->setSpeed(100);
    jeffMotor->run(BACKWARD);
    Serial.println("Turning Right");
    delay(50);
 }
 //detects a signature to turn right
 else if (pixy.blocks[sigsDetected].signature == 4) { //&& pixy.blocks[sigsDetected].x == 150) 
  //same thing here with establishing x distance away
   myMotor->run(BACKWARD);
  jeffMotor->run(FORWARD);
  Serial.println("Turning Left");
  delay(50);
 }
  else if(pixy.blocks[sigsDetected].signature == 1) {
    myMotor->setSpeed(0);
    jeffMotor->setSpeed(0);
    Serial.println("STOP!");
    delay(50);
  }

}
